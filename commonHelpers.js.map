{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst datePicker = document.querySelector('input#datetime-picker');\nconst startButton = document.querySelector('button[type=\"button\"]');\n\nconst fieldDays = document.querySelector('[data-days]');\nconst fieldHours = document.querySelector('[data-hours]');\nconst fieldMinutes = document.querySelector('[data-minutes]');\nconst fieldSeconds = document.querySelector('[data-seconds]');\n\nconst store = {\n  timerInterval: null,\n  selectedDate: null,\n};\n\nfunction addLeadingZero(value, fillString = '0') {\n  return String(value).padStart(2, fillString);\n}\n\nconst convertMs = ms => {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = addLeadingZero(Math.floor(ms / day));\n  const hours = addLeadingZero(Math.floor((ms % day) / hour));\n  const minutes = addLeadingZero(Math.floor(((ms % day) % hour) / minute));\n  const seconds = addLeadingZero(\n    Math.floor((((ms % day) % hour) % minute) / second)\n  );\n\n  return { days, hours, minutes, seconds };\n};\n\nconst runTimer = selectedDate => () => {\n  const { timerInterval } = store;\n  const timeDifference = selectedDate - new Date();\n\n  if (timeDifference <= 0) {\n    if (timerInterval) {\n      clearInterval(timerInterval);\n    }\n    fieldDays.textContent = '00';\n    fieldHours.textContent = '00';\n    fieldMinutes.textContent = '00';\n    fieldSeconds.textContent = '00';\n\n    return;\n  }\n\n  const { days, hours, minutes, seconds } = convertMs(timeDifference);\n\n  fieldDays.textContent = days;\n  fieldHours.textContent = hours;\n  fieldMinutes.textContent = minutes;\n  fieldSeconds.textContent = seconds;\n};\n\nconst onCloseHandler = selectedDates => {\n  const currentDate = new Date();\n  store.selectedDate = selectedDates[0];\n\n  if (store.selectedDate <= currentDate) {\n    iziToast.show({\n      message: 'Please choose a date in the future',\n      backgroundColor: '#EF4040',\n      messageColor: '#FFFFFF',\n      title: 'Error',\n      titleColor: '#FFFFFF',\n      messageSize: '16px',\n      titleSize: '16px',\n      position: 'topRight',\n    });\n    startButton.disabled = true;\n  } else {\n    startButton.disabled = false;\n  }\n};\n\nflatpickr(datePicker, {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose: onCloseHandler,\n});\n\nstartButton.addEventListener('click', function () {\n  if (store.timerInterval) {\n    clearInterval(store.timerInterval);\n  }\n\n  store.timerInterval = setInterval(runTimer(store.selectedDate), 1000);\n  this.disabled = true;\n});\n"],"names":["datePicker","startButton","fieldDays","fieldHours","fieldMinutes","fieldSeconds","store","addLeadingZero","value","fillString","convertMs","ms","days","hours","minutes","seconds","runTimer","selectedDate","timerInterval","timeDifference","onCloseHandler","selectedDates","currentDate","iziToast","flatpickr"],"mappings":"+IAKA,MAAMA,EAAa,SAAS,cAAc,uBAAuB,EAC3DC,EAAc,SAAS,cAAc,uBAAuB,EAE5DC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAe,SAAS,cAAc,gBAAgB,EACtDC,EAAe,SAAS,cAAc,gBAAgB,EAEtDC,EAAQ,CACZ,cAAe,KACf,aAAc,IAChB,EAEA,SAASC,EAAeC,EAAOC,EAAa,IAAK,CAC/C,OAAO,OAAOD,CAAK,EAAE,SAAS,EAAGC,CAAU,CAC7C,CAEA,MAAMC,EAAYC,GAAM,CAMtB,MAAMC,EAAOL,EAAe,KAAK,MAAMI,EAAK,KAAG,CAAC,EAC1CE,EAAQN,EAAe,KAAK,MAAOI,EAAK,MAAO,IAAI,CAAC,EACpDG,EAAUP,EAAe,KAAK,MAAQI,EAAK,MAAO,KAAQ,GAAM,CAAC,EACjEI,EAAUR,EACd,KAAK,MAASI,EAAK,MAAO,KAAQ,IAAU,GAAM,CACtD,EAEE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,EAEMC,EAAWC,GAAgB,IAAM,CACrC,KAAM,CAAE,cAAAC,CAAe,EAAGZ,EACpBa,EAAiBF,EAAe,IAAI,KAE1C,GAAIE,GAAkB,EAAG,CACnBD,GACF,cAAcA,CAAa,EAE7BhB,EAAU,YAAc,KACxBC,EAAW,YAAc,KACzBC,EAAa,YAAc,KAC3BC,EAAa,YAAc,KAE3B,MACD,CAED,KAAM,CAAE,KAAAO,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYL,EAAUS,CAAc,EAElEjB,EAAU,YAAcU,EACxBT,EAAW,YAAcU,EACzBT,EAAa,YAAcU,EAC3BT,EAAa,YAAcU,CAC7B,EAEMK,EAAiBC,GAAiB,CACtC,MAAMC,EAAc,IAAI,KACxBhB,EAAM,aAAee,EAAc,CAAC,EAEhCf,EAAM,cAAgBgB,GACxBC,EAAS,KAAK,CACZ,QAAS,qCACT,gBAAiB,UACjB,aAAc,UACd,MAAO,QACP,WAAY,UACZ,YAAa,OACb,UAAW,OACX,SAAU,UAChB,CAAK,EACDtB,EAAY,SAAW,IAEvBA,EAAY,SAAW,EAE3B,EAEAuB,EAAUxB,EAAY,CACpB,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAASoB,CACX,CAAC,EAEDnB,EAAY,iBAAiB,QAAS,UAAY,CAC5CK,EAAM,eACR,cAAcA,EAAM,aAAa,EAGnCA,EAAM,cAAgB,YAAYU,EAASV,EAAM,YAAY,EAAG,GAAI,EACpE,KAAK,SAAW,EAClB,CAAC"}